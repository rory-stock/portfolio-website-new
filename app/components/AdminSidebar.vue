<script setup lang="ts">
const navItems = [
  {
    label: "Dashboard",
    path: "/admin",
    icon: "M5.25 8c.228 0 .426 0 .6.042a1.5 1.5 0 0 1 1.11 1.107c.04.175.04.373.04.601v2.5c0 .228 0 .426-.041.6a1.5 1.5 0 0 1-1.109 1.11c-.174.04-.372.04-.6.04h-2.5c-.228 0-.426 0-.6-.041a1.5 1.5 0 0 1-1.108-1.108C1 12.676 1 12.478 1 12.25v-2.5c0-.228 0-.426.042-.6a1.5 1.5 0 0 1 1.107-1.108C2.324 8 2.522 8 2.75 8zm7 0c.228 0 .426 0 .6.042a1.5 1.5 0 0 1 1.109 1.107c.042.175.041.373.041.601v2.5c0 .228 0 .426-.041.6a1.5 1.5 0 0 1-1.108 1.109c-.175.042-.373.041-.601.041h-2.5c-.228 0-.426 0-.6-.041a1.5 1.5 0 0 1-1.108-1.108C8 12.676 8 12.478 8 12.25v-2.5c0-.228 0-.426.042-.6a1.5 1.5 0 0 1 1.107-1.108C9.324 8 9.522 8 9.75 8zM2.8 9c-.307 0-.373.003-.416.014a.5.5 0 0 0-.37.37c-.01.043-.014.11-.014.416v2.4c0 .308.003.374.014.417a.5.5 0 0 0 .37.37c.043.01.11.013.416.013h2.4c.308 0 .374-.003.417-.014a.5.5 0 0 0 .37-.369c.01-.043.013-.11.013-.417V9.8c0-.307-.003-.373-.014-.416a.5.5 0 0 0-.369-.37C5.574 9.004 5.507 9 5.2 9zm7 0c-.307 0-.373.003-.416.014a.5.5 0 0 0-.37.37c-.01.043-.014.11-.014.416v2.4c0 .308.003.374.014.417a.5.5 0 0 0 .37.37c.043.01.11.013.416.013h2.4c.308 0 .374-.003.417-.014a.5.5 0 0 0 .37-.369c.01-.043.013-.11.013-.417V9.8c0-.307-.004-.373-.014-.416a.5.5 0 0 0-.369-.37c-.043-.01-.11-.014-.417-.014zM5.25 1c.228 0 .426 0 .6.042a1.5 1.5 0 0 1 1.11 1.107c.04.175.04.373.04.601v2.5c0 .228 0 .426-.041.6A1.5 1.5 0 0 1 5.85 6.96c-.174.04-.372.04-.6.04h-2.5c-.228 0-.426 0-.6-.041A1.5 1.5 0 0 1 1.041 5.85C1 5.676 1 5.478 1 5.25v-2.5c0-.228 0-.426.042-.6a1.5 1.5 0 0 1 1.107-1.108C2.324 1 2.522 1 2.75 1zm7 0c.228 0 .426 0 .6.042a1.5 1.5 0 0 1 1.109 1.107c.042.175.041.373.041.601v2.5c0 .228 0 .426-.041.6a1.5 1.5 0 0 1-1.109 1.11c-.174.04-.372.04-.6.04h-2.5c-.228 0-.426 0-.6-.041A1.5 1.5 0 0 1 8.041 5.85C8 5.676 8 5.478 8 5.25v-2.5c0-.228 0-.426.042-.6a1.5 1.5 0 0 1 1.107-1.108C9.324 1 9.522 1 9.75 1zM2.8 2c-.307 0-.373.003-.416.014a.5.5 0 0 0-.37.37c-.01.043-.014.11-.014.416v2.4c0 .308.003.374.014.417a.5.5 0 0 0 .37.37c.043.01.11.013.416.013h2.4c.308 0 .374-.003.417-.014a.5.5 0 0 0 .37-.369c.01-.043.013-.11.013-.417V2.8c0-.307-.003-.373-.014-.416a.5.5 0 0 0-.369-.37C5.574 2.004 5.507 2 5.2 2zm7 0c-.307 0-.373.003-.416.014a.5.5 0 0 0-.37.37c-.01.043-.014.11-.014.416v2.4c0 .308.003.374.014.417a.5.5 0 0 0 .37.37c.043.01.11.013.416.013h2.4c.308 0 .374-.003.417-.014a.5.5 0 0 0 .37-.369c.01-.043.013-.11.013-.417V2.8c0-.307-.004-.373-.014-.416a.5.5 0 0 0-.369-.37c-.043-.01-.11-.014-.417-.014z",
  },
  {
    label: "Overview",
    path: "/admin/overview",
    icon: "M7.173.147a.6.6 0 0 1 .748.075l6.75 6.64l.077.093a.6.6 0 0 1-.824.838l-.095-.076l-.83-.816v5.6a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5V6.9l-.828.816a.6.6 0 0 1-.842-.855l6.75-6.64zM3 5.917V12h3V8.5l.01-.1A.5.5 0 0 1 6.5 8h3l.1.01a.5.5 0 0 1 .4.49V12h2V5.917L7.5 1.491zM7 12h2V9H7z",
  },
  {
    label: "Journal",
    path: "/admin/journal",
    icon: "M9 0a1 1 0 0 1 1 1v1h4a1 1 0 0 1 1 1v3a3 3 0 0 1-1 2.234V11.5a1.5 1.5 0 0 1-1.5 1.5h-10A1.5 1.5 0 0 1 1 11.5V8.233A3 3 0 0 1 0 6V3a1 1 0 0 1 1-1h4V1a1 1 0 0 1 1-1zm4 8.827c-.313.11-.65.173-1 .173H8v.5a.5.5 0 0 1-1 0V9H3c-.35 0-.687-.062-1-.173V11.5a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5zM1 6c0 .654.313 1.235.8 1.6l.13.09c.31.196.676.31 1.07.31h4v-.5a.5.5 0 0 1 1 0V8h4c.45 0 .866-.148 1.2-.4l.174-.147C13.76 7.088 14 6.573 14 6V3H1zm5-4h3V1H6z",
  },
  {
    label: "Info",
    path: "/admin/info",
    icon: "M7.5.9a6.6 6.6 0 1 1-.002 13.201A6.6 6.6 0 0 1 7.5.901m-2.216 9.805a7 7 0 0 0 1.575 2.458q.12.013.24.02v-2.338a17 17 0 0 1-1.815-.14m4.489-.006c-.611.083-1.242.131-1.873.145v2.34q.122-.008.242-.021A7 7 0 0 0 9.773 10.7m-7.415-.737a5.72 5.72 0 0 0 3.355 2.95a8.2 8.2 0 0 1-1.217-2.333a11 11 0 0 1-2.138-.617m10.283 0a11 11 0 0 1-2.072.605a8 8 0 0 1-1.253 2.335a5.7 5.7 0 0 0 3.325-2.94M4.71 7.9c.03.703.139 1.398.327 2.063c.661.104 1.358.165 2.063.182V7.9zm3.19 2.245a16 16 0 0 0 2.13-.192a8.8 8.8 0 0 0 .337-2.053H7.9zM1.816 7.9q.041.579.191 1.12c.628.345 1.407.612 2.27.8a10 10 0 0 1-.268-1.92zm9.252 0a9.5 9.5 0 0 1-.274 1.905c.735-.164 1.408-.386 1.975-.666l.224-.118q.15-.541.192-1.121zm-6.74-2.925c-.854.183-1.625.443-2.253.777q-.208.645-.258 1.347h2.192a9.8 9.8 0 0 1 .319-2.124M7.1 4.662a16 16 0 0 0-2.003.173a9 9 0 0 0-.388 2.264H7.1zm.8 2.437h2.467a8.7 8.7 0 0 0-.399-2.255A16 16 0 0 0 7.9 4.662zm2.84-2.11c.188.686.298 1.397.328 2.11h2.117a5.7 5.7 0 0 0-.26-1.348l-.156-.082c-.58-.287-1.272-.514-2.028-.68M5.714 2.087a5.72 5.72 0 0 0-3.231 2.707a11 11 0 0 1 2.086-.58a8 8 0 0 1 1.145-2.127m3.603.01c.5.642.892 1.362 1.178 2.128c.724.136 1.41.325 2.021.568a5.7 5.7 0 0 0-3.2-2.696M7.9 3.963a17 17 0 0 1 1.788.135a7 7 0 0 0-1.545-2.261a6 6 0 0 0-.243-.022zm-.8-2.148q-.122.009-.242.022A7 7 0 0 0 5.367 4.09c.567-.072 1.15-.115 1.732-.128z",
  },
];

const { loggedIn, clear } = useUserSession();

async function logout() {
  try {
    await $fetch("/api/logout", { method: "POST" });
    await clear();
    await navigateTo("/");
  } catch {
    alert("Logout failed");
  }
}
</script>

<template>
  <div
    class="my-4 ml-4 flex w-72 flex-col justify-between bg-neutral-900 font-geist text-neutral-100"
  >
    <div>
      <div
        class="mb-4 flex cursor-pointer items-center rounded-lg py-1 pl-2 text-lg transition-colors select-none hover:bg-neutral-700"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="23"
          height="23"
          viewBox="0 0 24 24"
          class="mr-2"
        >
          <path
            fill="currentColor"
            d="M10.825 22q-.675 0-1.162-.45t-.588-1.1L8.85 18.8q-.325-.125-.612-.3t-.563-.375l-1.55.65q-.625.275-1.25.05t-.975-.8l-1.175-2.05q-.35-.575-.2-1.225t.675-1.075l1.325-1Q4.5 12.5 4.5 12.337v-.675q0-.162.025-.337l-1.325-1Q2.675 9.9 2.525 9.25t.2-1.225L3.9 5.975q.35-.575.975-.8t1.25.05l1.55.65q.275-.2.575-.375t.6-.3l.225-1.65q.1-.65.588-1.1T10.825 2h2.35q.675 0 1.163.45t.587 1.1l.225 1.65q.325.125.613.3t.562.375l1.55-.65q.625-.275 1.25-.05t.975.8l1.175 2.05q.35.575.2 1.225t-.675 1.075l-1.325 1q.025.175.025.338v.674q0 .163-.05.338l1.325 1q.525.425.675 1.075t-.2 1.225l-1.2 2.05q-.35.575-.975.8t-1.25-.05l-1.5-.65q-.275.2-.575.375t-.6.3l-.225 1.65q-.1.65-.587 1.1t-1.163.45zM11 20h1.975l.35-2.65q.775-.2 1.438-.587t1.212-.938l2.475 1.025l.975-1.7l-2.15-1.625q.125-.35.175-.737T17.5 12t-.05-.787t-.175-.738l2.15-1.625l-.975-1.7l-2.475 1.05q-.55-.575-1.212-.962t-1.438-.588L13 4h-1.975l-.35 2.65q-.775.2-1.437.588t-1.213.937L5.55 7.15l-.975 1.7l2.15 1.6q-.125.375-.175.75t-.05.8q0 .4.05.775t.175.75l-2.15 1.625l.975 1.7l2.475-1.05q.55.575 1.213.963t1.437.587zm1.05-4.5q1.45 0 2.475-1.025T15.55 12t-1.025-2.475T12.05 8.5q-1.475 0-2.487 1.025T8.55 12t1.013 2.475T12.05 15.5M12 12"
          />
        </svg>
        <p class="mb-0.5">rorystock.com</p>
      </div>
      <nav class="flex flex-col gap-2">
        <NuxtLink
          v-for="item in navItems"
          :key="item.label"
          :to="item.path"
          class="flex cursor-pointer items-center gap-2 rounded-lg bg-neutral-100 px-2 py-1 text-[0.95rem] text-neutral-900 transition-opacity select-none hover:opacity-85"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="15"
            height="15"
            viewBox="0 0 15 15"
          >
            <path fill="currentColor" :d="item.icon" />
          </svg>
          {{ item.label }}
        </NuxtLink>
      </nav>
    </div>
    <div class="flex flex-col gap-2">
      <button
        v-if="loggedIn"
        @click="logout"
        class="flex cursor-pointer items-center rounded-lg bg-neutral-100 px-2 py-1 text-[0.95rem] text-neutral-900 transition-opacity select-none hover:opacity-85"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="19"
          height="19"
          viewBox="0 0 24 24"
          class="mr-1"
        >
          <g
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
          >
            <path
              d="M14 8V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2v-2"
            />
            <path d="M9 12h12l-3-3m0 6l3-3" />
          </g>
        </svg>
        Logout
      </button>
      <button
        class="mb-2 flex cursor-pointer items-center rounded-lg bg-neutral-100 px-2 py-1 text-[0.95rem] text-neutral-900 transition-opacity select-none hover:opacity-85"
        @click="navigateTo('/')"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="17"
          height="17"
          viewBox="0 0 512 512"
          class="mr-1"
        >
          <path
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="48"
            d="M244 400L100 256l144-144M120 256h292"
          />
        </svg>
        Home
      </button>
    </div>
  </div>
</template>
